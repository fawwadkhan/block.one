{"ast":null,"code":"import _regeneratorRuntime from\"/Users/madcad/Documents/block.three/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/madcad/Documents/block.three/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/madcad/Documents/block.three/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/madcad/Documents/block.three/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/madcad/Documents/block.three/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/madcad/Documents/block.three/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/madcad/Documents/block.three/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/madcad/Documents/block.three/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/madcad/Documents/block.three/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/madcad/Documents/block.three/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{JsonRpc}from'eosjs';import endpoint from'../../validation/endpoint';import BlockInfo from'../commons/BlockInfo';import Spinner from'../commons/Spinner';import{setInterval}from'timers';var Landing=/*#__PURE__*/function(_Component){_inherits(Landing,_Component);function Landing(props){var _this;_classCallCheck(this,Landing);_this=_possibleConstructorReturn(this,_getPrototypeOf(Landing).call(this,props));_this.state={maxLimit:10,currLimit:0,blockContainer:[],errors:'',block:{},rpcConnection:''};_this.getLatestBlocks=_this.getLatestBlocks.bind(_assertThisInitialized(_this));_this.getBlocks=_this.getBlocks.bind(_assertThisInitialized(_this));_this.intervalOBJ=null;return _this;}_createClass(Landing,[{key:\"componentWillMount\",value:function componentWillMount(){this.setState({rpcConnection:new JsonRpc(endpoint)});}},{key:\"getBlocks\",value:function getBlocks(){var _this2=this;var rpc;return _regeneratorRuntime.async(function getBlocks$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.state.currLimit===this.state.maxLimit){clearInterval(this.intervalOBJ._id);}else{rpc=this.state.rpcConnection;rpc.get_info().then(function(data){if(data.head_block_num){if(!_this2.state.block[data.head_block_num]){_this2.setState(function(){return{block:_objectSpread({},_this2.state.block,_defineProperty({},data.head_block_num,data.head_block_num))};});rpc.get_block(data.head_block_num).then(function(block_data){if(block_data){_this2.setState({blockContainer:[].concat(_toConsumableArray(_this2.state.blockContainer),[block_data])});}_this2.setState({currLimit:_this2.state.currLimit+1});}).catch(function(err){console.log('Error Response: ',err);});}}}).catch(function(err){console.log('Error Response: ',err);});}case 1:case\"end\":return _context.stop();}}},null,this);}},{key:\"refreshPage\",value:function refreshPage(){window.location.reload(false);}},{key:\"getLatestBlocks\",value:function getLatestBlocks(){this.intervalOBJ=setInterval(this.getBlocks,1000);}},{key:\"componentDidMount\",value:function componentDidMount(){this.getLatestBlocks();}},{key:\"render\",value:function render(){var blockContainer=this.state.blockContainer;var blockHeadContainer;var submitButtonContainer;if(blockContainer.length===10){blockHeadContainer=blockContainer.map(function(block){return React.createElement(BlockInfo,{key:block.block_num,information:block,onClick:\"callMe\"});});submitButtonContainer=React.createElement(\"div\",{style:{margin:'0 auto'}},React.createElement(\"input\",{type:\"submit\",value:\"Load latest blocks\",onClick:this.refreshPage,className:\"btn btn-info btn-block mt-4\"}));}else{blockHeadContainer=React.createElement(Spinner,{count:this.state.currLimit});}return React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-md-12\"},React.createElement(\"h3\",null,\"Latest Blocks\"),React.createElement(\"hr\",null)),React.createElement(\"div\",{className:\"col-sm-8\"},React.createElement(\"p\",{className:\"lead font-weight-bold\"},\"BlockID\")),React.createElement(\"div\",{className:\"col-sm-2\"},React.createElement(\"p\",{className:\"lead font-weight-bold\"},\"Timestamp\")),React.createElement(\"div\",{className:\"col-sm-2\"},React.createElement(\"p\",{className:\"lead font-weight-bold\"},\"Transactions\")),blockHeadContainer,submitButtonContainer));}}]);return Landing;}(Component);export default Landing;","map":{"version":3,"sources":["/Users/madcad/Documents/block.three/src/components/layout/Landing.js"],"names":["React","Component","JsonRpc","endpoint","BlockInfo","Spinner","setInterval","Landing","props","state","maxLimit","currLimit","blockContainer","errors","block","rpcConnection","getLatestBlocks","bind","getBlocks","intervalOBJ","setState","clearInterval","_id","rpc","get_info","then","data","head_block_num","get_block","block_data","catch","err","console","log","window","location","reload","blockHeadContainer","submitButtonContainer","length","map","block_num","margin","refreshPage"],"mappings":"0rCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,OAAxB,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,sBAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,CACA,OAASC,WAAT,KAA4B,QAA5B,C,GAEMC,CAAAA,O,iEAEJ,iBAAYC,KAAZ,CAAkB,yCAChB,yEAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACTC,QAAQ,CAAC,EADA,CAETC,SAAS,CAAC,CAFD,CAGTC,cAAc,CAAC,EAHN,CAITC,MAAM,CAAC,EAJE,CAKTC,KAAK,CAAC,EALG,CAMTC,aAAa,CAAC,EANL,CAAb,CAQA,MAAKC,eAAL,CAAuB,MAAKA,eAAL,CAAqBC,IAArB,+BAAvB,CACA,MAAKC,SAAL,CAAiB,MAAKA,SAAL,CAAeD,IAAf,+BAAjB,CACA,MAAKE,WAAL,CAAmB,IAAnB,CAZgB,aAanB,C,mFAEmB,CAClB,KAAKC,QAAL,CAAc,CAACL,aAAa,CAAE,GAAIb,CAAAA,OAAJ,CAAYC,QAAZ,CAAhB,CAAd,EACD,C,yLAIC,GAAG,KAAKM,KAAL,CAAWE,SAAX,GAAyB,KAAKF,KAAL,CAAWC,QAAvC,CAAgD,CAC9CW,aAAa,CAAC,KAAKF,WAAL,CAAiBG,GAAlB,CAAb,CACD,CAFD,IAEK,CACCC,GADD,CACO,KAAKd,KAAL,CAAWM,aADlB,CAEHQ,GAAG,CAACC,QAAJ,GAAeC,IAAf,CAAoB,SAAAC,IAAI,CAAE,CACxB,GAAGA,IAAI,CAACC,cAAR,CAAuB,CACrB,GAAG,CAAC,MAAI,CAAClB,KAAL,CAAWK,KAAX,CAAiBY,IAAI,CAACC,cAAtB,CAAJ,CAA0C,CACxC,MAAI,CAACP,QAAL,CAAc,iBAAO,CACnBN,KAAK,kBACA,MAAI,CAACL,KAAL,CAAWK,KADX,oBAEFY,IAAI,CAACC,cAFH,CAEoBD,IAAI,CAACC,cAFzB,EADc,CAAP,EAAd,EAMAJ,GAAG,CAACK,SAAJ,CAAcF,IAAI,CAACC,cAAnB,EAAmCF,IAAnC,CAAwC,SAAAI,UAAU,CAAE,CAClD,GAAGA,UAAH,CAAc,CACZ,MAAI,CAACT,QAAL,CAAc,CAACR,cAAc,8BAAK,MAAI,CAACH,KAAL,CAAWG,cAAhB,GAA+BiB,UAA/B,EAAf,CAAd,EACD,CACD,MAAI,CAACT,QAAL,CAAc,CACZT,SAAS,CAAE,MAAI,CAACF,KAAL,CAAWE,SAAX,CAAqB,CADpB,CAAd,EAGD,CAPD,EAOGmB,KAPH,CAOS,SAAAC,GAAG,CAAG,CACbC,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAA+BF,GAA/B,EACD,CATD,EAUD,CACA,CAAC,CApBN,EAoBQD,KApBR,CAoBc,SAAAC,GAAG,CAAI,CACfC,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAA+BF,GAA/B,EACD,CAtBL,EAuBD,C,yGAIU,CACXG,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB,EACD,C,yDAGgB,CACb,KAAKjB,WAAL,CAAmBb,WAAW,CAAC,KAAKY,SAAN,CAAgB,IAAhB,CAA9B,CACH,C,6DAEkB,CACjB,KAAKF,eAAL,GACD,C,uCAEU,IAECJ,CAAAA,cAFD,CAEoB,KAAKH,KAFzB,CAECG,cAFD,CAIP,GAAIyB,CAAAA,kBAAJ,CAEA,GAAIC,CAAAA,qBAAJ,CAEA,GAAG1B,cAAc,CAAC2B,MAAf,GAAwB,EAA3B,CAA8B,CAC1BF,kBAAkB,CAAGzB,cAAc,CAAC4B,GAAf,CAAmB,SAAA1B,KAAK,QAC3C,qBAAC,SAAD,EAAW,GAAG,CAAEA,KAAK,CAAC2B,SAAtB,CAAiC,WAAW,CAAE3B,KAA9C,CAAqD,OAAO,CAAC,QAA7D,EAD2C,EAAxB,CAArB,CAGAwB,qBAAqB,CACjB,2BAAK,KAAK,CAAE,CAACI,MAAM,CAAC,QAAR,CAAZ,EACI,6BAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,oBAA3B,CAAgD,OAAO,CAAE,KAAKC,WAA9D,CAA2E,SAAS,CAAC,6BAArF,EADJ,CADJ,CAKH,CATD,IASK,CACHN,kBAAkB,CAAG,oBAAC,OAAD,EAAS,KAAK,CAAE,KAAK5B,KAAL,CAAWE,SAA3B,EAArB,CACD,CAED,MACE,4BAAK,SAAS,CAAC,WAAf,EACI,2BAAK,SAAS,CAAC,KAAf,EACI,2BAAK,SAAS,CAAC,WAAf,EACE,8CADF,CAEE,8BAFF,CADJ,CAKI,2BAAK,SAAS,CAAC,UAAf,EAA0B,yBAAG,SAAS,CAAC,uBAAb,YAA1B,CALJ,CAMI,2BAAK,SAAS,CAAC,UAAf,EAA0B,yBAAG,SAAS,CAAC,uBAAb,cAA1B,CANJ,CAOI,2BAAK,SAAS,CAAC,UAAf,EAA0B,yBAAG,SAAS,CAAC,uBAAb,iBAA1B,CAPJ,CAQK0B,kBARL,CASKC,qBATL,CADJ,CADF,CAeD,C,qBAvGmBrC,S,EA0GtB,cAAeM,CAAAA,OAAf","sourcesContent":["import React, { Component } from 'react';\nimport { JsonRpc } from 'eosjs';\nimport endpoint from '../../validation/endpoint';\nimport BlockInfo from '../commons/BlockInfo';\nimport Spinner from '../commons/Spinner';\nimport { setInterval } from 'timers';\n\nclass Landing extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n        maxLimit:10,\n        currLimit:0,\n        blockContainer:[],\n        errors:'',\n        block:{},\n        rpcConnection:''\n    }\n    this.getLatestBlocks = this.getLatestBlocks.bind(this);\n    this.getBlocks = this.getBlocks.bind(this);\n    this.intervalOBJ = null;\n}\n\ncomponentWillMount(){\n  this.setState({rpcConnection: new JsonRpc(endpoint)});\n}\n\n\nasync getBlocks(){\n  if(this.state.currLimit === this.state.maxLimit){\n    clearInterval(this.intervalOBJ._id);\n  }else{\n    let rpc = this.state.rpcConnection;\n    rpc.get_info().then(data=>{\n      if(data.head_block_num){\n        if(!this.state.block[data.head_block_num]){\n          this.setState(() => ({\n            block: {\n              ...this.state.block,\n              [data.head_block_num]: data.head_block_num,\n            }\n          }));\n          rpc.get_block(data.head_block_num).then(block_data=>{\n            if(block_data){\n              this.setState({blockContainer:[...this.state.blockContainer,block_data]})\n            }\n            this.setState({\n              currLimit: this.state.currLimit+1\n            })\n          }).catch(err =>{\n            console.log('Error Response: ',err);\n          })\n        }\n        }}).catch(err => {\n          console.log('Error Response: ',err);\n        });\n  }\n        \n}\n\nrefreshPage(){\n  window.location.reload(false);\n}\n\n\ngetLatestBlocks(){\n    this.intervalOBJ = setInterval(this.getBlocks,1000)\n}\n\ncomponentDidMount(){\n  this.getLatestBlocks();\n}\n\n  render() {\n\n    const { blockContainer } = this.state;\n\n    let blockHeadContainer;\n\n    let submitButtonContainer;\n\n    if(blockContainer.length===10){\n        blockHeadContainer = blockContainer.map(block => (\n          <BlockInfo key={block.block_num} information={block} onClick=\"callMe\" />\n        ))\n        submitButtonContainer = (\n            <div style={{margin:'0 auto'}}>\n                <input type=\"submit\" value=\"Load latest blocks\" onClick={this.refreshPage} className=\"btn btn-info btn-block mt-4\"/>\n            </div>\n        )\n    }else{\n      blockHeadContainer = <Spinner count={this.state.currLimit} />\n    }\n    \n    return (\n      <div className=\"container\">\n          <div className=\"row\">\n              <div className=\"col-md-12\">\n                <h3>Latest Blocks</h3>\n                <hr/>\n              </div>\n              <div className=\"col-sm-8\"><p className=\"lead font-weight-bold\">BlockID</p></div>\n              <div className=\"col-sm-2\"><p className=\"lead font-weight-bold\">Timestamp</p></div>\n              <div className=\"col-sm-2\"><p className=\"lead font-weight-bold\">Transactions</p></div>\n              {blockHeadContainer}\n              {submitButtonContainer}\n          </div>\n      </div>\n    )\n  }\n}\n\nexport default Landing;\n"]},"metadata":{},"sourceType":"module"}